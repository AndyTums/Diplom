# Трекер задач сотрудников

Это серверное приложение для работы с базой данных, представляющее собой трекер задач сотрудников. Приложение
обеспечивает CRUD (Create, Read, Update, Delete) операции для сотрудников и задач, а также предоставляет специальные
эндпоинты для получения информации о загруженности сотрудников и важных задачах.

## Оглавление

- [Описание](#описание)
- [Требования](#требования)
- [Функциональность](#функциональность)
- [Технические требования](#технические-требования)
- [Установка и запуск](#установка-и-запуск)
- [Документация API](#документация-api)
- [Тестирование](#тестирование)
- [Лицензия](#лицензия)

## Описание

Трекер задач позволяет компании эффективно управлять заданиями, назначенными сотрудникам, и обеспечивает прозрачность
процессов выполнения задач. Это помогает в равномерном распределении нагрузки между сотрудниками и своевременном
выполнении ключевых задач.

## Требования

### База данных

- Реляционная база данных: PostgreSQL

### Структура базы данных

- **Таблица сотрудников**:
    - ФИО
    - Должность
    - Список задач, который связан форматом ManytoMany в модели Tracker и доступен по запросу "trackers"

- **Таблица задач**:
    - Наименование
    - Ссылка на родительскую задачу (если есть зависимость)
    - Исполнители
    - Срок
    - Статус

## Функциональность

- **CRUD для сотрудников и задач**: Реализованы стандартные операции для создания, чтения, обновления и удаления записей
  для таблиц сотрудников и задач.
- **Специальные эндпоинты**:
    - **Занятые сотрудники**: Возвращает список сотрудников и их задачи, отсортированный по количеству активных задач.
    - **Важные задачи**:
        1. Получает задачи, которые не взяты в работу, но от которых зависят другие задачи, взятые в работу.
        2. Поиск сотрудников, которые могут взять такие задачи (наименее загруженный сотрудник или сотрудник,
           выполняющий родительскую задачу, если ему назначено максимум на 2 задачи больше, чем у наименее загруженного
           сотрудника).
        3. Возвращает список объектов в формате: `{Важная задача, Срок, [ФИО сотрудника]}`.

## Технологии

1. **Язык программирования**: Python 3.12
2. **Фреймворк**: Django с использованием Django REST Framework (DRF)
3. **База данных**: PostgreSQL
4. **ORM**: Django ORM
5. **Контейнеризация**: Docker, Docker-Compose
6. **Валидация данных**: Реализована валидация данных входящих запросов.
7. **Документация**: README.md с описанием структуры проекта, инструкциями по установке и запуску, а также описанием
   API.
8. **Качество кода**: Соблюдение стандартов PEP8. Весь код хранится в удаленном Git репозитории.
9. **Тестирование**: Тесты для всех основных функций платформы, покрытие минимум 75%.
10. **Автодокументация**: Автогенерируемая документация API с использованием Swagger или ReDoc.

### Фильтрация

#### В данном проекте, как было указанно выше используются кастомные фильтры:

Модели Employee:

1. Фильтрация сотрудника по количеству задач <=
    [http://localhost:8000/employee/?count_lte=2](http://localhost:8000/employee/?count_lte=2)
2. Фильтрация сотрудника по количеству задач >=
    [http://localhost:8000/employee/?count_gte=2](http://localhost:8000/employee/?count_gte=2)
3. Фильтрация сотрудников которые менее нагружены(имеют максимум на 2 задачи больше от самого разгруженного) или
    выполняет связанную задачу.

    [http://localhost:8000/employee/?can_take_task=True](http://localhost:8000/employee/??can_take_task=True)

Модели Tracker:

1. Фильтрация задачи по статусу
    [http://localhost:8000/tracker/?status=active](http://localhost:8000/tracker/?status=active)
2. Фильтрация по наличию связанной задачи
    [http://localhost:8000/tracker/?related_tracker_isnull=True](http://localhost:8000/tracker/?related_tracker_isnull=True)
3. Фильтрация по статусу связанной задачи
    [http://localhost:8000/tracker/?related_tracker_status=active](http://localhost:8000/tracker/?related_tracker_status=active)
4. Фильтрация важных задач
    [http://localhost:8000/tracker/?important_trackers=true](http://localhost:8000/tracker/?important_trackers=true)

## Установка и запуск

1. Клонируйте репозиторий:

```bash
git clone https://github.com/AndyTums/MyDRFCourse.git
````

3. Установите зависимости:

```bash
poetry update
````

4. Настройте базу данных `PostgreSQL` и заполните переменные окружения:

```bash
SECRET_KEY=

DEBUG=

NAME=Diplom
HOST=
USER=
PASSWORD=
PORT=

````

5. Запустите миграции:

```bash
python manage.py makemigrations
python manage.py migrate
````

6. Запустите сервер:
```bash
python manage.py runserver
````

7. По необходимости добавить проект в контейнер:
```bash
docker-compose up --build
````

#### После запуска приложение будет доступно по адресу: http://localhost:8000

## Документация API

Автоматическая документация API будет доступна по адресу: 

[http://localhost:8000/redoc/](http://localhost:8000/redoc/) - REDOC 

[http://localhost:8000/swagger/](http://localhost:8000/swagger/) - SWAGGER

## Тестирование

Для запуска тестов используйте следующую команду:
```bash
python manage.py test
````

## Лицензия

Этот проект лицензирован на условиях MIT License. Смотрите файл [LICENSE](LICENSE) для подробностей.
